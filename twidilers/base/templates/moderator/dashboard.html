<!--NO BACKEND WORK WAS PUT INTO THIS-->
{extends 'base.html' %}
{% block title %}Moderator Dashboard{% endblock %}
{% block head %}
<link rel="stylesheet" data-turbo-track="dynamic"href="{{ url_for('.static', filename='/styles/dashboard.css') }}">
<link rel="stylesheet" data-turbo-track="dynamic"href="{{ url_for('.static', filename='/styles/form.css') }}">

{% endblock %}
{% block content %}
{% set account = findAccount() %}
{% if account.isMod = true %}
    <h1>Welcome to the moderator dashboard, {{ account.username }}</h1>
    <p>Here you can manage the site and users.</p>
    <h1>User dashboard</h1>
        <h2>Search for a user</h2>
            <form method="post">
                <input type="text" name="username" placeholder="Username">
                <button class="submit" name="search">Search</button>
            </form>
        {% for user in users %}
            <div class="user">
                <h2>{{ user.username }}</h2>
                <p>{{ user.email }}</p>
                <form method="post">
                    <button class="submit" name="ban" value="{{ user.id }}">Ban</button>
                    <button class="submit" name="unban" value="{{ user.id }}">Unban</button>
                    <!-- Hides posts from others but doesn't tell the user they are banned -->
                    <button class="submit" name="shadowban" value="{{ user.id }}">Shadowban</button>
                </form>
            </div>
        {% endfor %}
    <h1>All posts</h1>
        {% for post in posts %}
            <div class="post">
                <h2>{{ post.title }}</h2>
                <p>{{ post.content }}</p>
                <p>{{ post.author }}</p>
                <form method="post">
                    <button class="submit" name="delete" value="{{ post.id }}">Delete</button>
                </form>
            </div>
        {% endfor %}
{% else %}
    <h2>This should return a 404</h2>
{% endif %}
{% endblock %}