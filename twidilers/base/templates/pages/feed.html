{% extends 'base.html' %}
{% block title %}Feed{% endblock %}
{% block content %}
<h1 id="feedtitle">Your feed</h1>
<a href="{{ url_for('.write_post') }}"><button  class="submit" id="createpost">Create a Post</button></a>
<div class="spacer"></div>
{% if postlist() | length > 0 %}
{% for post in postlist() %}
<div class="pst">
    <a href="{{ url_for('.profile',username=post.author.username) }}">
        <div class="auth-info">
            <img class="pst-auth-pfp" src="{{ url_for('.get_pfp', username=post.author.username) }}">
            <section class="pst-auths">
            <u><a href="{{ url_for('.profile',username=post.author.username) }}"><p class="pst-auth">{{post.author.displayname}}</p></a></u>
            <a href="{{ url_for('.profile',username=post.author.username) }}"><p class="pst-disp">@{{post.author.username}}</p></a>
        </section>
        </div>
    </a>
    <h2 class="pst-title" style="text-decoration:{{post.decorators}}">{{post.title}}</h3>
    <p class="pst-content">{{post.content}}</p>
    <p class="pst-date" id="date{{ loop.index0 }}">date</p>
    <script>
        const date{{ loop.index0 }} = new Date({{ post.date.timestamp()*1000 }})
            document.getElementById("date{{ loop.index0 }}").innerHTML = date{{ loop.index0 }}.toLocaleString();
    </script>
</div>
{% endfor %}
{% else %}
<h2>Nothing here yet...</h2>
{% endif %}
{% endblock %}